<div class="ldcv"><div class="base w-640"><div class="inner position-relative card"><div class="card-body p-4"><style type="text/css">[ld=close]{position:absolute;top:.25em;right:.5em;cursor:pointer}</style><script type="@plotdb/block">module.exports={pkg:{dependencies:[{name:"ldcover",type:"js"},{name:"ldform",type:"js"}]},interface:function(){return this.ldcv},init:function(e){var i,c,s=this;i=e.root,c=e.ctx;return servebase.corectx(function(e){var n,t,r,o;n=e.core;s.ldcv=new ldcover({root:i,resident:true,zmgr:n.zmgr});t=c.ldform;r=new ldview({root:i,action:{click:{add:function(e){var n,t,r,i;n=e.node;if(!o.ready()){return}t=o.values().isbn;if(!(r=s.isbn.find(t))){return}i={list:[{book:r.key,date:new Date}]};return ld$.fetch("/api/read/",{method:"POST"},{json:i}).then(function(){return s.ldcv.set()})}}}});s.isbn={hash:{},key:{},find:function(e){return this.key[e]},check:function(e){if(typeof this.hash[e]==="number"){return this.hash[e]}if(this.hash[e]){return}return this._check(e)},_check:debounce(function(n){var t=this;this.hash[n]=proxise(function(){});return ld$.fetch("/api/book/",{method:"POST"},{json:{list:[n]},type:"json"}).then(function(e){if(e.length){t.hash[n]=0}e.map(function(e){return t.key[e.isbn]=e});return o.check({n:"isbn",now:true})})})};return o=new t({root:i,submit:r.get("add"),verify:function(e,n,t){if(!n){return 2}if(e==="isbn"){return s.isbn.check(n)}return 0}})})}};</script><div class="mb-4"><div class="form-group"><label>ISBN</label><input class="form-control" name="isbn"></div></div><div class="d-flex justify-content-between g-2 align-items-center"><div class="btn btn-outline-secondary" data-ldcv-set="">取消</div><div class="btn btn-primary disabled" ld="add">新增</div></div></div></div></div></div>