 (function() { function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cdiv class=\"ldcv scroll\"\u003E\u003Cdiv class=\"base w-640\"\u003E\u003Cdiv class=\"inner position-relative card\"\u003E\u003Cdiv class=\"card-body p-4\"\u003E\u003Cstyle type=\"text\u002Fcss\"\u003E[ld=close]{position:absolute;top:.25em;right:.5em;cursor:pointer}\u003C\u002Fstyle\u003E\u003Cscript type=\"@plotdb\u002Fblock\"\u003Emodule.exports={pkg:{dependencies:[{name:\"ldcover\",type:\"js\"},{name:\"ldform\",type:\"js\"}]},interface:function(){return this.ldcv},init:function(n){var i,c,s=this;i=n.root,c=n.ctx;return servebase.corectx(function(n){var e,t,r,o;e=n.core;s.ldcv=new ldcover({root:i,resident:true,zmgr:e.zmgr});s.ldcv.on(\"data\",function(n){});t=c.ldform;r=new ldview({root:i,action:{click:{add:function(n){var e,t,r,i;e=n.node;if(!o.ready()){return}t=o.values().isbn;if(!(r=s.isbn.find(t))){return}i={list:[{book:r.key,date:new Date}]};return ld$.fetch(\"\u002Fapi\u002Fsudan\u002F???\",{method:\"POST\"},{json:i}).then(function(){return s.ldcv.set()})}}}});s.isbn={hash:{},key:{},find:function(n){return this.key[n]},check:function(n){if(typeof this.hash[n]===\"number\"){return this.hash[n]}if(this.hash[n]){return}return this._check(n)},_check:debounce(function(e){var t=this;this.hash[e]=proxise(function(){});return ld$.fetch(\"\u002Fapi\u002Fbook\u002F\",{method:\"POST\"},{json:{list:[e]},type:\"json\"}).then(function(n){if(n.length){t.hash[e]=0}n.map(function(n){return t.key[n.isbn]=n});return o.check({n:\"isbn\",now:true})})})};return o=new t({root:i,submit:r.get(\"add\"),verify:function(n,e,t){if(!e){return 2}if(n===\"isbn\"){return s.isbn.check(e)}return 0}})})}};\u003C\u002Fscript\u003E\u003Cdiv class=\"mb-4\"\u003E\u003Cdiv class=\"form-group\"\u003E\u003Clabel\u003EISBN\u003C\u002Flabel\u003E\u003Cinput class=\"form-control\" name=\"isbn\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"d-flex justify-content-between g-2 align-items-center\"\u003E\u003Cdiv class=\"btn btn-outline-secondary\" data-ldcv-set=\"\"\u003E取消\u003C\u002Fdiv\u003E\u003Cdiv class=\"btn btn-primary disabled\" ld=\"add\"\u003E新增\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";;return pug_html;}; module.exports = template; })() 