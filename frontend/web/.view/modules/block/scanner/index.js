 (function() { function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cdiv class=\"ldcv\"\u003E\u003Cdiv class=\"base\"\u003E\u003Cdiv class=\"inner position-relative\"\u003E\u003Cscript type=\"@plotdb\u002Fblock\"\u003Emodule.exports={interface:function(){return this.ldcv},init:function(e){var n,t,r,i,o,u=this;n=e.root;t=new BarcodeDetector({format:[\"code_39\"]});this.ldcv=new ldcover({root:n});this.cache={};this.info={};r=new ldview({root:n,text:{isbn:function(e){var n,t;n=e.node;t=(u.info||{}).isbn||\"\";return!t?t:\"ISBN: \"+t},title:function(e){var n;n=e.node;return(u.info||{}).title||u.value||\"\"}},action:{click:{get:function(e){var n;n=e.node;return u.ldcv.set(u.value)}}},handler:{info:function(e){var n;n=e.node;return n.classList.toggle(\"d-none\",!u.value)}}});i=r.get(\"video\");o=function(){t.detect(i).then(function(e){e.forEach(function(e){return u.value=e.rawValue});if(u.value&&\u002F^\\d+$\u002F.exec(u.value+\"\")){Promise.resolve().then(function(){if(u.cache[u.value]){return u.cache[u.value]}return function(r){return u.cache[r]=Promise.resolve().then(function(){return ld$.fetch(\"\u002Fapi\u002Fcode\u002F\"+r,{method:\"GET\"},{type:\"json\"}).then(function(e){var n,t;e==null&&(e={});u.cache[r]=n=!(t=(e.items||(e.items=[]))[0])?{}:{title:t.volumeInfo.title,isbn:r};if(r!==u.value){return lderror.reject(999)}return n})})}(u.value)}).then(function(e){u.info=e;return r.render([\"isbn\",\"info\",\"title\"])})[\"catch\"](function(e){if(lderror.id(e)===999){}else{return Promise.reject(e)}})}return r.render([\"isbn\",\"info\",\"title\"])});return requestAnimationFrame(o)};return navigator.mediaDevices.getUserMedia({video:{facingMode:\"environment\"}}).then(function(e){i.srcObject=e;i.autoplay=true;return setTimeout(function(){return o()},1e3)})}};\u003C\u002Fscript\u003E\u003Cstyle type=\"text\u002Fcss\"\u003E.base{width:800px;max-width:90%;height:600px;max-height:90%}[ld=info]{position:absolute;bottom:1em;right:1em;background:#fff;border-radius:.25em;background:#fff;padding:.5em}[ld=close]{position:absolute;top:.25em;right:.5em;cursor:pointer}video{width:100%;height:100%}\u003C\u002Fstyle\u003E\u003Cvideo ld=\"video\"\u003E\u003C\u002Fvideo\u003E\u003Cdiv class=\"text-lg\" ld=\"close\" data-ldcv-set=\"\"\u003E\u003Ci class=\"i-close\"\u003E\u003C\u002Fi\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"d-none\" ld=\"info\"\u003E\u003Cdiv class=\"text-sm\" ld=\"isbn\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"btn-group\"\u003E\u003Cdiv class=\"btn btn-lg btn-outline-secondary\" ld=\"title\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"btn btn-lg btn-primary\" ld=\"get\"\u003E確定\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";;return pug_html;}; module.exports = template; })() 