<div class="ldcv d-flex align-items-center justify-content-center scroll"><div class="base w-480 rwd"><div class="card"><div class="card-body"><script type="@plotdb/block">module.exports={pkg:{dependencies:[{name:"ldform"}],i18n:{en:{title:"Update Your Password",desc:"You haven't updated your password for a while. We would like to ask you to perform regular password updates.",skip:"Skip This Time",strength:"Password Strength",enter:{old:"Enter old password",new:"Enter new password",again:"Type it again",weak:"password too weak",min:"8 characters minimal",mismatch:"password not matched",nomatch:"Password not matched."},setup:"Set Password",hint:["Good password should be long enough ( at least 10 chars ). Prevent using your name, phone number or your birthday as password.",["You can check how","Password Strength","is measured to know how safe your password is."]],done:"Password Updated",fail:"Incorrect Old Password?",no_reused:"recently used passwords not allowed",len:"Length",bad:"Bad",ok:"Okay",good:"Good"},"zh-TW":{title:"定期密碼更新",desc:"您已經有一段時間未更新密碼了，我們要請您進行定期的密碼更新。",skip:"這次先略過",strength:"密碼強度",enter:{old:"輸入舊的密碼",new:"輸入新的密碼",again:"再輸入一次",min:"至少八個字元",weak:"密碼太弱了",mismatch:"兩組密碼不相符",nomatch:"密碼不符"},setup:"設定密碼",hint:["好的密碼至少要夠長 ( 至少十個字 )。請不要用姓名、電話或生日當您的密碼。",["你可以查閱","Password Strength","這篇文章來了解怎樣算是一個好密碼。"]],done:"密碼重設完成",fail:"舊的密碼有誤",no_reused:"不能使用近期用過的密碼",len:"長度",bad:"不妙",ok:"還好",good:"不錯"}}},interface:function(){return this.ldcv},init:function(e){var l,u,c,w=this;l=e.root,u=e.ctx,c=e.t;return servebase.corectx(function(e){var i;i=e.core;return i.init().then(function(){var r,e,n,s,t,a,o,d;r=i.auth,e=i.loader,n=i.ldcvmgr,s=i.captcha,t=i.error;a=u.ldform;w.ldcv=new ldcover({root:l,zmgr:i.zmgr});o=new ldview({root:l,init:{submit:function(e){var n,t;n=e.node,t=e.local;return t.ldld=new ldloader({root:n})}},action:{click:{submit:function(e){var n,t;n=e.local,t=e.node;if(t.classList.contains("disabled")){return}return d.checkAll().then(function(){var e,t;if(!d.ready()){return}e=n.ldld;e.on();t=d.values();return s.guard({cb:function(e){var n;n={o:t.oldpasswd,n:t.newpasswd1,captcha:e,renew:true};return ld$.fetch("/api/auth/passwd/",{method:"put",headers:{"Content-Type":"application/json; charset=UTF-8"}},{json:n})}})["finally"](function(){return e.off()}).then(function(){return r.fetch({renew:true})}).then(function(){ldnotify.send("success",c("done"));d.reset();return w.ldcv.set()})["catch"](function(e){var n;n=lderror.id(e);return ldnotify.send("danger",n===1031?c("enter.weak"):n===1030?c("enter.mismatch"):n===1036?c("no_reused"):c("fail"))})})}}}});return d=new a({root:l,names:function(){return["username","oldpasswd","newpasswd1","newpasswd2"]},submit:"[ld='submit']",afterCheck:function(e){var n,t,r,s,a,o,d,i,l,u;n=[this.fields.newpasswd1.value,this.fields.newpasswd2.value],t=n[0],r=n[1];e.username=0;if(e.newpasswd1!==1&&t.length<6){e.newpasswd1=2;e.newpasswd2=1}if(t!==r&&(e.newpasswd2!==1||r&&e.newpasswd1===0)){e.newpasswd2=2}s=ld$.find(this.root,"[data-node]",0);if(e.newpasswd1!==1){a=Math.round(t.length);o=a<8?"bad":a<10?"ok":"good";d=100*(a<12?a:12)/12;i=a<8?"danger":a<10?"warning":"success";ld$.find(s,"label",0).textContent=c("len")+": "+c(o);l=ld$.find(s,".progress-bar",0);l.style.width=d+"%";u=l.getAttribute("class");u=u.replace(/bg-\S+/,"").trim()+(" bg-"+i);return l.setAttribute("class",u)}}})})})}};</script><h3 class="text-center" t>title</h3><p t>desc</p><hr><form class="form text-left m-auto"><div class="form-group"><label t>enter.old</label><input class="d-none" name="username" type="text" autocomplete="username"><input class="form-control" name="oldpasswd" type="password" autocomplete="current-password"><div class="invalid-feedback" t>enter.nomatch</div></div><div class="from-group mb-3"><label t>enter.new</label><input class="form-control" name="newpasswd1" type="password" t t-placeholder="enter.min" autocomplete="new-password"><div class="invalid-feedback" t>enter.weak</div></div><div class="from-group mb-3"><label t>enter.again</label><input class="form-control" name="newpasswd2" type="password" autocomplete="new-password"><div class="invalid-feedback" t>enter.mismatch</div></div><div class="form-group mb-3 d-flex g-3 align-items-center" data-node="passwd-bar1"><label class="text-capitalize" t="strength">&nbsp;</label><div class="flex-grow-1 progress" style="height:18px"><div class="progress-bar progress-bar-striped" style="width:0%"></div></div></div><div class="btn btn-success btn-block mt-2 disabled ld-ext-right" ld="submit"><span t="setup"></span><div class="ld ldld bare em-1"></div></div><br><div class="text-muted"><small><p t>hint.0</p><p><span t>hint.1.0</span><a class="mx-1" href="https://en.wikipedia.org/wiki/Password_strength" target="_blank" rel="noopener noreferrer" t>hint.1.1</a><span t>hint.1.2</span></p></small></div></form><hr><div class="text-right"><div class="btn btn-outline-secondary" t data-ldcv-set="">skip</div></div></div></div></div></div>
