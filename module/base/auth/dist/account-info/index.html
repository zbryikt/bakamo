<div><script type="@plotdb/block">module.exports={pkg:{i18n:{en:{title:"Basic Information",displayname:"Display Name",public:"for others to recognize you",required:"Required",userid:"User ID",copied:"Copied",verified:"Verified",unverified:"Not verified",username:"Account Name",email:"Your Email Address",verify:"Email Verification",send:"Send Verify Mail",update:"Update Basic Info",updated:"Updated","verified at":"verified at {{date}}"},"zh-TW":{title:"基本資訊",displayname:"顯示名稱",public:"供他人識別的顯示名稱",required:"必要欄位",userid:"用戶代碼",copied:"已複製",verified:"已認證",unverified:"未認證",username:"帳號名稱",email:"你的電子郵件地址",verify:"電子郵箱認證",send:"寄發認證信",update:"更新基本資訊",updated:"更新完成","verified at":"已於 {{date}} 驗證"}},dependencies:[{name:"ldform"},{name:"ldview"}]},init:function(e){var l,t,c;l=e.root,t=e.ctx,c=e.t;return servebase.corectx(function(e){var i,a,d,u,n,o;i=e.core;a=i.auth,d=i.ldcvmgr,u=i.captcha;n=t.ldform,o=t.ldview;return a.ensure().then(function(e){var r,t;r=new n({root:l,submit:".btn[ld=updateBasicData]",afterCheck:function(e){e.title=0;e.tags=0;if(this.fields.displayname.value){return e.displayname=0}},verify:function(e,n,t){if(e==="description"){return!(n&&n.length>=1024)?0:2}if(e==="displayname"){return n?0:2}}});r.values({displayname:i.user.displayname});return t=new o({root:l,init:{"update-basic-data":function(e){var n,t;n=e.node,t=e.local;return t.ldld=new ldloader({root:n})},"mail-verify":function(e){var n,t;n=e.node,t=e.local;return t.ldld=new ldloader({root:n})}},action:{change:{avatar:function(e){var n;n=e.node}},click:{copyuid:function(e){var n;n=e.node;navigator.clipboard.writeText(t.get("uid").value);n.classList.add("tip-on");return debounce(2e3).then(function(){return n.classList.remove("tip-on")})},"update-basic-data":function(e){var n,t,i;n=e.node,t=e.local;t.ldld.on();i=r.values();return u.guard({cb:function(e){var n,t;n=(t={captcha:e},t.description=i.description,t.displayname=i.displayname,t.title=i.title,t.tags=i.tags,t);return ld$.fetch("/api/auth/user/",{method:"PUT"},{json:n,type:"text"})}})["finally"](function(){return debounce(1e3).then(function(){return t.ldld.off()})}).then(function(){return ldnotify.send("success",c("updated"))}).then(function(){return a.fetch({renew:true})})},"mail-verify":function(e){var n,t;n=e.node,t=e.local;if(n.classList.contains("disabled")){return}t.ldld.on();return u.guard({cb:function(e){return ld$.fetch("/api/auth/mail/verify",{method:"POST"},{json:{captcha:e}})}})["finally"](function(){return debounce(1e3).then(function(){return t.ldld.off()})}).then(function(){return d.toggle("verification-mail-sent")})}}},handler:{"mail-verify":function(e){var n,t;n=e.node;if(!i.user.verified){return}t=new Date(i.user.verified.date);t=[(t.getYear()+1900+"").padStart(4,"0"),(t.getMonth()+1+"").padStart(2,"0"),(t.getDate()+"").padStart(2,"0")].join("-");return n.innerText=c("verified at",{date:t})},"is-staff":function(e){var n;n=e.node;return n.classList.toggle("d-none",!i.user.staff)},"is-verified":function(e){var n;n=e.node;return n.classList.toggle("d-none",!i.user.verified)},"not-verified":function(e){var n;n=e.node;return n.classList.toggle("d-none",!!i.user.verified)},uid:function(e){var n;n=e.node;return n.value=i.user.key},username:function(e){var n;n=e.node;return n.value=i.user.username}}})})})}};</script><h3 t>title</h3><hr><div class="form" data-name="basic"><div class="row mb-1"><div class="col-md"><div class="form-group"><label><span t>displayname</span> <small class="text-muted">/ <span t>public</span></small></label><input class="form-control" name="displayname" placeholder="" value=""><div class="invalid-feedback" t>required</div></div></div><div class="col-md"><div class="form-group"><label class="d-flex align-items-end"><div class="flex-grow-1" t>userid</div><a class="badge badge-dark d-none" ld="is-staff" href="/staff/">staff</a></label><div class="input-group"><input class="form-control disabled" ld="uid" readonly value=""><div class="input-group-append has-tips manual" ld="copyuid"><div class="hover-tip tip-sm tip-no-min-width text-nowrap" t>copied</div><div class="btn btn-outline-dark"><i class="i-clone" aria-hidden="true"></i></div></div></div></div></div></div><div class="row mb-1"><div class="col-md"><div class="form-group"><label><span t>username</span> <small class="text-muted">/ <span t>email</span></small></label><input class="form-control" ld="username" placeholder="e.g., yourname@yourhost.com" disabled value=""><div class="float-right text-success d-none" ld="is-verified"><i class="i-check" aria-hidden="true"></i> <span t>verified</span></div><div class="float-right text-danger d-none" ld="not-verified"><i class="i-alert text-sm" aria-hidden="true"></i> <small t>unverified</small></div></div></div><div class="col-md"><div class="form-group"><label t>verify</label><div class="d-none" ld="is-verified"><div class="btn btn-outline-secondary btn-block disabled" ld="mail-verify" t>verified</div></div><div class="d-none" ld="not-verified"><div class="btn btn-success btn-block ld ld-ext-right" ld="mail-verify"><span t>send</span> <i class="i-mail ml-2" aria-hidden="true"></i> <div class="ld ld-spin ld-ring"></div></div></div></div></div></div><div class="form-group"><div class="btn btn-primary ld-ext-right" ld="update-basic-data"><span t>update</span> <div class="ld ld-spin ld-ring"></div></div></div></div></div>
