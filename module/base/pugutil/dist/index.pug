mixin register-locals(name = "exports")
  if locals
    script(type="module").
      ldc.register("viewlocals", [], function() {
        return !{escjson(locals[name] || null)}
      });
mixin meta(meta)
  -
    if(!meta) { meta = {} }
  if(meta.url)
    meta(property="og:url", content=meta.url)
  meta(property="og:title", content=meta.title || "")
  meta(property="og:description", content=meta.description || "")
  meta(property="og:locale",content=meta.locale || "zh_TW")
  meta(property="og:type", content=meta.type || "website")
  if(meta.thumb)
    meta(property="og:image",content=meta.thumb.url)
    meta(property="og:image:type",content=meta.thumb.type || "image/jpeg")
    meta(property="og:image:width",content=meta.thumb.width || "1200")
    meta(property="og:image:height",content=meta.thumb.height || "630")
  link(rel="icon",type="image/x-icon",href=meta.favicon || "/favicon.ico")

-
  var ldui = {};
  ldui.ellipsis = function(str, len) {
    return ((str || '').substring(0, len || 200) + (((str || '').length > (len || 200)) ? '...' : ''));
  };
